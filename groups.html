<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ó–∞—Ä—è - –ì—Ä—É–ø–ø—ã</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  
  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  
  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–∞ Inter -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap">
  
  <!-- –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ -->
  <link rel="stylesheet" href="styles.css">
  
  <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,">
  
  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Telegram Web Apps SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  
  <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è groups.html -->
  <style>
    .page-wrapper {
      height: 100vh;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      background-color: var(--color-bg);
    }
    main.page-main {
      padding-top: 160px;
    }
    /* –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –±–ª–æ–∫ */
    .project-title {
      text-align: center;
      font-size: 1.25rem;
      font-weight: bold;
      color: var(--color-text);
      margin: 1rem 0;
    }
    /* –°—Ç–∏–ª–∏ –¥–ª—è –∞—É–¥–∏–æ–ø–ª–µ–µ—Ä–∞ (–∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ index.html) */
    #audio-player {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem;
      background: rgba(255,255,255,0.9);
      border-radius: 0.5rem;
      max-width: 400px;
      margin: 1rem auto;
    }
    #mute-toggle {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
    }
    #seekbar {
      flex-grow: 1;
    }
    #audio-player span {
      font-size: 0.875rem;
    }
  </style>
</head>
<body>
  <!-- –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ -->
  <div class="project-title">–ü—Ä–æ–µ–∫—Ç –ó–∞—Ä—è</div>
  
  <div class="page-wrapper">
    <main class="page-main">
      <ul class="groups-list">
        <!-- (–ì—Ä—É–ø–ø—ã –∫–∞–∫ —Ä–∞–Ω–µ–µ) -->
        <li>
          <article class="group-card" aria-label="–ì—Ä—É–ø–ø–∞ –ù–∞—Ä–∫–æ–º–∞–Ω–∏—è">
            <div class="group-info">
              <h3>–ù–∞—Ä–∫–æ–º–∞–Ω–∏—è</h3>
              <p>1.3K —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ ¬∑ 20 —Å–æ–æ–±—â–µ–Ω–∏–π/–¥–µ–Ω—å</p>
            </div>
            <a href="https://t.me/SafeSpace_DA_bot" target="_blank" rel="noopener noreferrer" class="btn btn-light" aria-label="–í—Å—Ç—É–ø–∏—Ç—å –≤ –≥—Ä—É–ø–ø—É –ù–∞—Ä–∫–æ–º–∞–Ω–∏—è">
              –í—Å—Ç—É–ø–∏—Ç—å
            </a>
          </article>
        </li>
        <!-- –æ—Å—Ç–∞–ª—å–Ω—ã–µ –≥—Ä—É–ø–ø—ã ... (–º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –±–ª–æ–∫, –µ—Å–ª–∏ –º–µ—Å—Ç–∞ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç) -->
      </ul>
      <div class="create-group-container">
        <button class="btn btn-accent" onclick="alert('–§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä—É–ø–ø—ã –≤ —Å—Ç–∞–¥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏!')" aria-label="–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≥—Ä—É–ø–ø—É">
          –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≥—Ä—É–ø–ø—É
        </button>
      </div>
      <!-- –ê—É–¥–∏–æ–ø–ª–µ–µ—Ä -->
      <div id="audio-player">
        <button id="mute-toggle">üîá</button>
        <input id="seekbar" type="range" min="0" value="0" step="1">
        <span id="current-time">0:00</span> / <span id="duration">0:00</span>
      </div>
      <!-- –ê—É–¥–∏–æ—ç–ª–µ–º–µ–Ω—Ç -->
      <audio id="bgAudio" src="Audio1_calm_music.mp3" autoplay muted loop></audio>
    </main>
  </div>
  
  <script>
    // –ê—É–¥–∏–æ–ø–ª–µ–µ—Ä (–∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π index.html)
    const audio = document.getElementById('bgAudio');
    const muteToggle = document.getElementById('mute-toggle');
    const seekbar = document.getElementById('seekbar');
    const currentTimeSpan = document.getElementById('current-time');
    const durationSpan = document.getElementById('duration');

    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
    }

    audio.addEventListener('loadedmetadata', () => {
      seekbar.max = Math.floor(audio.duration);
      durationSpan.textContent = formatTime(audio.duration);
      const savedTime = localStorage.getItem('bgAudioCurrentTime');
      if(savedTime) audio.currentTime = parseFloat(savedTime);
      const savedMuted = localStorage.getItem('bgAudioMuted');
      if(savedMuted !== null) {
        audio.muted = (savedMuted === 'true');
        muteToggle.textContent = audio.muted ? 'üîá' : 'üîä';
      }
    });

    audio.addEventListener('timeupdate', () => {
      seekbar.value = Math.floor(audio.currentTime);
      currentTimeSpan.textContent = formatTime(audio.currentTime);
    });

    muteToggle.addEventListener('click', () => {
      audio.muted = !audio.muted;
      muteToggle.textContent = audio.muted ? 'üîá' : 'üîä';
      localStorage.setItem('bgAudioMuted', audio.muted);
    });

    seekbar.addEventListener('input', () => {
      audio.currentTime = seekbar.value;
    });

    window.addEventListener('beforeunload', () => {
      localStorage.setItem('bgAudioCurrentTime', audio.currentTime);
    });

    // Telegram Web Apps
    window.addEventListener('load', function() {
      if(window.Telegram && Telegram.WebApp) {
        Telegram.WebApp.ready();
        setTimeout(() => { Telegram.WebApp.requestFullscreen(); }, 100);
        if(Telegram.WebApp.CloseButton) Telegram.WebApp.CloseButton.hide();
        if(Telegram.WebApp.BackButton) {
          Telegram.WebApp.BackButton.show();
          Telegram.WebApp.BackButton.onClick(() => {
            window.location.href = 'index.html';
          });
        }
      }
    });
  </script>
</body>
</html>