<!DOCTYPE html> 
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ó–∞—Ä—è ‚Äî –û–±—ä—ë–º–Ω—ã–µ –¢–µ–Ω–∏</title>
  <!-- viewport-fit=cover –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è safe area -->
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  
  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  
  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–∞ Inter -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap">
  
  <!-- –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ -->
  <link rel="stylesheet" href="styles.css">
  
  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Telegram Web Apps SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  
  <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ inline-—Å—Ç–∏–ª–∏ –¥–ª—è index.html -->
  <style>
    /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –æ–≤–µ—Ä–ª–µ—è –∫–∞—Ä—Ç–æ—á–µ–∫ */
    .scroll-item {
      position: relative;
    }
    .text-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 1rem;
      background: linear-gradient(to top, rgba(0,0,0,0.6), transparent);
      color: #fff;
      border-radius: 0 0 1rem 1rem;
    }
    .text-overlay h2 {
      margin: 0 0 0.5rem;
    }
    .text-overlay p {
      margin: 0 0 1rem;
    }
    /* –°—Ç–∏–ª–∏ –∞—É–¥–∏–æ–ø–ª–µ–µ—Ä–∞ */
    #audio-player {
      position: fixed;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.6);
      padding: 0.5rem 1rem;
      border-radius: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: #fff;
      z-index: 1000;
    }
    #audio-player button {
      background: none;
      border: none;
      color: inherit;
      font-size: 1.5rem;
      cursor: pointer;
    }
    #audio-player input[type=range] {
      width: 150px;
    }
  </style>
</head>
<body>
  <!-- page-wrapper -->
  <div class="page-wrapper">
    
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤–≤–µ—Ä—Ö—É -->
    <div class="project-title">
      –ü—Ä–æ–µ–∫—Ç –ó–∞—Ä—è
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç (–∫–∞—Ä—Ç–æ—á–∫–∏) -->
    <main>
      <section class="scroll-container" aria-label="–û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ">
        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ (i) –û—Å–æ–∑–Ω–∞–π -->
        <article class="scroll-card">
          <div class="scroll-item" style="background-image: url('https://cdn.usegalileo.ai/sdxl10/3b6b25bd-c463-43ae-b072-9d1dae0b7c25.png');">
            <div class="text-overlay">
              <h2>–û—Å–æ–∑–Ω–∞–π</h2>
              <p>–ò–ò-–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–æ–º–æ–∂–µ—Ç —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –º—ã—Å–ª—è—Ö –∏ –Ω–∞–π—Ç–∏ —Ä–µ—à–µ–Ω–∏–µ.</p>
              <!-- –û—Ç–∫—Ä—ã–≤–∞–µ–º –≤–Ω–µ—à–Ω—é—é —Å—Å—ã–ª–∫—É –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ -->
              <button class="btn btn-accent" onclick="window.open('https://t.me/whoisj1j1_test_v1_bot', '_blank')">
                –ò–ò-–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç
              </button>
            </div>
          </div>
        </article>
        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ (ii) –ü–æ–≥–æ–≤–æ—Ä–∏ -->
        <article class="scroll-card">
          <div class="scroll-item" style="background-image: url('https://i.imgur.com/vcVMVzz.png');">
            <div class="text-overlay">
              <h2>–ü–æ–≥–æ–≤–æ—Ä–∏</h2>
              <p>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Å—å –∫ –°–µ–π—Ñ –°–ø–µ–π—Å–∞–º ‚Äì —á–∞—Ç–∞–º –¥–ª—è –∞–Ω–æ–Ω–∏–º–Ω–æ–≥–æ –æ–±—â–µ–Ω–∏—è.</p>
              <!-- –ò—Å–ø–æ–ª—å–∑—É–µ–º location.replace –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –±–µ–∑ –∑–∞–ø–∏—Å–∏ –≤ –∏—Å—Ç–æ—Ä–∏–∏ -->
              <button class="btn btn-accent" onclick="location.replace('groups.html')">
                –°–µ–π—Ñ –°–ø–µ–π—Å—ã
              </button>
            </div>
          </div>
        </article>
        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ (iii) –£–∑–Ω–∞–π -->
        <article class="scroll-card">
          <div class="scroll-item" style="background-image: url('https://cdn.usegalileo.ai/sdxl10/7422235d-57b0-4d00-8dd9-864a619ed2d7.png');">
            <div class="text-overlay">
              <h2>–£–∑–Ω–∞–π</h2>
              <p>–ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –Ω–∞—à –¢–µ–ª–µ–≥—Ä–∞–º –∫–∞–Ω–∞–ª –∏ —É–∑–Ω–∞–≤–∞–π –ø–æ–ª–µ–∑–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã.</p>
              <button class="btn btn-accent" onclick="window.open('https://t.me/LeoBel_Zarya', '_blank')">
                –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞
              </button>
            </div>
          </div>
        </article>
        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ (iv) –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Å—å -->
        <article class="scroll-card">
          <div class="scroll-item" style="background-image: url('https://i.imgur.com/SDyDfYL.jpeg');">
            <div class="text-overlay">
              <h2>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Å—å</h2>
              <p>–ù–∞–π–¥–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –±–∞–ª–∞–Ω—Å —Å –º–µ–¥–∏—Ç–∞—Ü–∏—è–º–∏ –∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è–º–∏.</p>
              <button class="btn btn-accent" onclick="alert('–ú–µ–¥–∏—Ç–∞—Ü–∏–∏ –≤ —Å—Ç–∞–¥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏!')">
                –ú–µ—Å—Ç–æ –°–∏–ª—ã
              </button>
            </div>
          </div>
        </article>
      </section>
      
      <!-- –ö–∞—Å—Ç–æ–º–Ω—ã–π –∞—É–¥–∏–æ–ø–ª–µ–µ—Ä -->
      <div id="audio-player">
        <button id="mute-toggle">üîá</button>
        <input id="seekbar" type="range" min="0" value="0" step="1">
        <span id="current-time">0:00</span> / <span id="duration">0:00</span>
      </div>
      <!-- –°–∫—Ä—ã—Ç—ã–π –∞—É–¥–∏–æ—ç–ª–µ–º–µ–Ω—Ç —Å –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–º -->
      <audio id="bgAudio" src="Audio1_calm_music.mp3" autoplay loop></audio>
      
    </main>
  </div>
  
  <script>
    // –ë–ª–æ–∫–∏—Ä—É–µ–º –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–≤–∞–π–ø
    let startX = 0, startY = 0;
    function onTouchStart(e) {
      startX = e.touches[0].clientX;
      startY = e.touches[0].clientY;
    }
    function onTouchMove(e) {
      const currentX = e.touches[0].clientX;
      const currentY = e.touches[0].clientY;
      const diffX = currentX - startX;
      const diffY = currentY - startY;
      if (Math.abs(diffY) > Math.abs(diffX)) {
        e.preventDefault();
      }
    }
    document.addEventListener('touchstart', onTouchStart, { passive: false });
    document.addEventListener('touchmove', onTouchMove, { passive: false });
  
    window.addEventListener('load', function() {
      if (window.Telegram && Telegram.WebApp) {
        Telegram.WebApp.ready();
        if (Telegram.WebApp.setSwipeBehavior) {
          Telegram.WebApp.setSwipeBehavior({ allow_vertical_swipe: false });
        }
        setTimeout(function(){
          Telegram.WebApp.requestFullscreen();
        }, 100);
        if (Telegram.WebApp.BackButton) {
          Telegram.WebApp.BackButton.hide();
        }
        if (Telegram.WebApp.CloseButton) {
          Telegram.WebApp.CloseButton.show();
        }
        Telegram.WebApp.onEvent('fullscreenChanged', function(isFullscreen) {
          console.log('Fullscreen changed:', isFullscreen);
        });
        Telegram.WebApp.onEvent('fullscreenFailed', function(error) {
          console.error('Fullscreen failed:', error);
        });
      }
    });
  
    function updateTelegramButtons() {
      if (window.Telegram && Telegram.WebApp) {
        if (Telegram.WebApp.BackButton) {
          Telegram.WebApp.BackButton.hide();
        }
        if (Telegram.WebApp.CloseButton) {
          Telegram.WebApp.CloseButton.show();
        }
      }
    }
  
    window.addEventListener('pageshow', function() {
      updateTelegramButtons();
      const interval = setInterval(updateTelegramButtons, 500);
      setTimeout(() => clearInterval(interval), 5000);
    });
  
    window.addEventListener('popstate', function() {
      updateTelegramButtons();
      const interval = setInterval(updateTelegramButtons, 500);
      setTimeout(() => clearInterval(interval), 5000);
    });
  
    document.addEventListener("visibilitychange", function() {
      if (document.visibilityState === "visible") {
        updateTelegramButtons();
      }
    });
  
    document.addEventListener('DOMContentLoaded', () => {
      const container = document.querySelector('.scroll-container');
      const cards = document.querySelectorAll('.scroll-card');
  
      function onScroll() {
        const containerRect = container.getBoundingClientRect();
        const containerCenter = containerRect.left + containerRect.width / 2;
  
        cards.forEach(card => {
          const cardRect = card.getBoundingClientRect();
          const cardCenter = cardRect.left + cardRect.width / 2;
          const distance = Math.abs(containerCenter - cardCenter);
  
          if (distance < cardRect.width / 2) {
            card.classList.add('active');
          } else {
            card.classList.remove('active');
          }
        });
      }
  
      container.addEventListener('scroll', onScroll);
      onScroll();
    });
  </script>
  
  <script>
    // –ê—É–¥–∏–æ–ø–ª–µ–µ—Ä
    const audio = document.getElementById('bgAudio');
    const muteToggle = document.getElementById('mute-toggle');
    const seekbar = document.getElementById('seekbar');
    const currentTimeSpan = document.getElementById('current-time');
    const durationSpan = document.getElementById('duration');
  
    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞—É–¥–∏–æ (–≤—Ä–µ–º—è –∏ —Ä–µ–∂–∏–º –∑–≤—É–∫–∞)
    audio.addEventListener('loadedmetadata', () => {
      const savedTime = localStorage.getItem('bgAudioCurrentTime');
      if (savedTime) {
        audio.currentTime = parseFloat(savedTime);
      }
      const savedMuted = localStorage.getItem('bgAudioMuted');
      if (savedMuted !== null) {
        audio.muted = (savedMuted === 'true');
        muteToggle.textContent = audio.muted ? 'üîá' : 'üîä';
      }
      seekbar.max = Math.floor(audio.duration);
      durationSpan.textContent = formatTime(audio.duration);
    });
  
    audio.addEventListener('timeupdate', () => {
      seekbar.value = Math.floor(audio.currentTime);
      currentTimeSpan.textContent = formatTime(audio.currentTime);
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤ localStorage
      localStorage.setItem('bgAudioCurrentTime', audio.currentTime);
    });
  
    muteToggle.addEventListener('click', () => {
      audio.muted = !audio.muted;
      muteToggle.textContent = audio.muted ? 'üîá' : 'üîä';
      localStorage.setItem('bgAudioMuted', audio.muted);
    });
  
    seekbar.addEventListener('input', () => {
      audio.currentTime = seekbar.value;
      localStorage.setItem('bgAudioCurrentTime', audio.currentTime);
    });
  
    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
    }
  </script>
</body>
</html>
