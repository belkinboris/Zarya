<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Заря — Горизонтальный Скролл + Центрирование Карточки</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  
  <!-- Tailwind (не обязательно, если не нужен) -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  
  <!-- Шрифт Inter (опционально) -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap">

  <!-- Наши стили -->
  <link rel="stylesheet" href="styles.css">

  <!-- Telegram Web Apps SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- Дополнительные inline-стили (только для оверлея текста) -->
  <style>
    /* Статический оверлей текста на карточках */
    .text-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 1rem;
      background: linear-gradient(to top, rgba(0,0,0,0.6), transparent);
      color: #fff;
      border-radius: 0 0 1rem 1rem;
    }
    .text-overlay h2 {
      margin: 0 0 0.5rem;
    }
    .text-overlay p {
      margin: 0 0 1rem;
    }
  </style>
</head>
<body>
  <!-- Корневая обёртка (см. .page-wrapper в styles.css) -->
  <div class="page-wrapper">
    
    <!-- Заголовок -->
    <div class="project-title">
      Проект Заря
    </div>

    <!-- Основной блок с карточками -->
    <main>
      <section class="scroll-container" aria-label="Основное содержание">
        <!-- Карточка (i) Осознай -->
        <article class="scroll-card">
          <div class="scroll-item" style="background-image: url('https://cdn.usegalileo.ai/sdxl10/3b6b25bd-c463-43ae-b072-9d1dae0b7c25.png');">
            <div class="text-overlay">
              <h2>Осознай</h2>
              <p>Наш ИИ-Ассистент поможет разобраться в твоих мыслях.</p>
              <button class="btn btn-accent" onclick="window.location.href='https://t.me/whoisj1j1_test_v1_bot'">
                ИИ-Ассистент
              </button>
            </div>
          </div>
        </article>
        <!-- Карточка (ii) Поговори -->
        <article class="scroll-card">
          <div class="scroll-item" style="background-image: url('https://i.imgur.com/vcVMVzz.png');">
            <div class="text-overlay">
              <h2>Поговори</h2>
              <p>Присоединись к Сейф Спейсам – чатам для анонимного общения.</p>
              <button class="btn btn-accent" onclick="window.location.href='groups.html'">
                Сейф Спейсы
              </button>
            </div>
          </div>
        </article>
        <!-- Карточка (iii) Узнай -->
        <article class="scroll-card">
          <div class="scroll-item" style="background-image: url('https://cdn.usegalileo.ai/sdxl10/7422235d-57b0-4d00-8dd9-864a619ed2d7.png');">
            <div class="text-overlay">
              <h2>Узнай</h2>
              <p>Подпишись на наш Телеграм канал и узнавай полезные материалы.</p>
              <button class="btn btn-accent" onclick="window.location.href='https://t.me/LeoBel_Zarya'">
                Библиотека
              </button>
            </div>
          </div>
        </article>
        <!-- Карточка (iv) Восстановись -->
        <article class="scroll-card">
          <div class="scroll-item" style="background-image: url('https://i.imgur.com/SDyDfYL.jpeg');">
            <div class="text-overlay">
              <h2>Восстановись</h2>
              <p>Найди внутренний баланс с медитациями и дыхательными упражнениями.</p>
              <button class="btn btn-accent" onclick="window.location.href='meditations.html'">
                Место Силы
              </button>
            </div>
          </div>
        </article>
      </section>
    </main>
  </div>
  
  <!-- Скрипты -->
  <script>
    // 1) Блокируем вертикальные свайпы (Telegram и руками)

    // Для ручной блокировки движений пальца:
    let startX = 0;
    let startY = 0;

    function onTouchStart(e) {
      startX = e.touches[0].clientX;
      startY = e.touches[0].clientY;
    }

    function onTouchMove(e) {
      const currentX = e.touches[0].clientX;
      const currentY = e.touches[0].clientY;

      const diffX = currentX - startX;
      const diffY = currentY - startY;
      
      // Если вертикальный сдвиг больше горизонтального, блокируем
      if (Math.abs(diffY) > Math.abs(diffX)) {
        e.preventDefault();
      }
    }

    document.addEventListener('touchstart', onTouchStart, { passive: false });
    document.addEventListener('touchmove', onTouchMove, { passive: false });

    // 2) Telegram WebApp API: fullscreen и отключение свайпа
    window.addEventListener('load', function() {
      if (window.Telegram && Telegram.WebApp) {
        Telegram.WebApp.ready();

        // Отключаем свайп вниз (закрытие)
        if (Telegram.WebApp.setSwipeBehavior) {
          Telegram.WebApp.setSwipeBehavior({ allow_vertical_swipe: false });
        }

        // Запрашиваем fullscreen
        setTimeout(function() {
          Telegram.WebApp.requestFullscreen();
        }, 100);

        // Показываем кнопку "Close", скрываем "Back"
        if (Telegram.WebApp.BackButton) {
          Telegram.WebApp.BackButton.hide();
        }
        if (Telegram.WebApp.CloseButton) {
          Telegram.WebApp.CloseButton.show();
        }
      }
    });
  </script>
  
  <!-- 3) Скрипт для "авто-приподнятия" центральной карточки -->
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    const scrollContainer = document.querySelector('.scroll-container');
    const cards = document.querySelectorAll('.scroll-card');
    
    function highlightCenterCard() {
      const containerRect = scrollContainer.getBoundingClientRect();
      // Находим центр контейнера (по горизонтали)
      const containerCenterX = containerRect.left + containerRect.width / 2;
      
      let bestCard = null;
      let minDist = Infinity;
      
      // Ищем карточку, ч. центр ближе всего к центру контейнера
      cards.forEach(card => {
        const cardRect = card.getBoundingClientRect();
        const cardCenterX = cardRect.left + cardRect.width / 2;
        const dist = Math.abs(containerCenterX - cardCenterX);
        if (dist < minDist) {
          minDist = dist;
          bestCard = card;
        }
      });
      
      // Сбрасываем класс у всех
      cards.forEach(card => card.classList.remove('is-center'));
      // Ставим класс только центральной
      if (bestCard) {
        bestCard.classList.add('is-center');
      }
    }
    
    // Когда прокручиваем влево/вправо
    scrollContainer.addEventListener('scroll', highlightCenterCard, { passive: true });
    
    // Сразу при загрузке тоже определим центральную
    highlightCenterCard();
  });
  </script>

</body>
</html>
