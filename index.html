<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Заря — Объёмные Тени</title>
  <!-- viewport-fit=cover для корректного использования safe area -->
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  
  <!-- Подключение Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  
  <!-- Подключение шрифта Inter -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap">
  
  <!-- Собственные стили -->
  <link rel="stylesheet" href="styles.css">
  
  <!-- Подключение Telegram Web Apps SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <!-- page-wrapper -->
  <div class="page-wrapper">
    
    <!-- Заголовок вверху -->
    <div class="project-title">
      Проект Заря
    </div>

    <!-- Основной контент (карточки) -->
    <main>
      <section class="scroll-container" aria-label="Основное содержание">
        <!-- Карточка (i) Осознай -->
        <article class="scroll-card">
          <div class="scroll-item" 
               style="background-image: url('https://cdn.usegalileo.ai/sdxl10/3b6b25bd-c463-43ae-b072-9d1dae0b7c25.png');">
            <div class="text-overlay">
              <h2>Осознай</h2>
              <p>Наш ИИ-Ассистент поможет разобраться в твоих мыслях и найти решение.</p>
              <button class="btn btn-accent" onclick="window.location.href='https://t.me/whoisj1j1_test_v1_bot'">
                ИИ-Ассистент
              </button>
            </div>
          </div>
        </article>
        
        <!-- Карточка (ii) Поговори -->
        <article class="scroll-card">
          <div class="scroll-item" style="background-image: url('https://i.imgur.com/vcVMVzz.png');">
            <div class="text-overlay">
              <h2>Поговори</h2>
              <p>Присоединись к Сейф Спейсам – чатам для анонимного общения.</p>
              <button class="btn btn-accent" onclick="window.location.href='groups.html'">
                Сейф Спейсы
              </button>
            </div>
          </div>
        </article>
        
        <!-- Карточка (iii) Узнай -->
        <article class="scroll-card">
          <div class="scroll-item" style="background-image: url('https://cdn.usegalileo.ai/sdxl10/7422235d-57b0-4d00-8dd9-864a619ed2d7.png');">
            <div class="text-overlay">
              <h2>Узнай</h2>
              <p>Подпишись на наш Телеграм канал и узнавай полезные материалы.</p>
              <button class="btn btn-accent" onclick="window.location.href='https://t.me/LeoBel_Zarya'">
                Библиотека
              </button>
            </div>
          </div>
        </article>
        
        <!-- Карточка (iv) Восстановись -->
        <article class="scroll-card">
          <div class="scroll-item" style="background-image: url('https://i.imgur.com/SDyDfYL.jpeg');">
            <div class="text-overlay">
              <h2>Восстановись</h2>
              <p>Найди внутренний баланс с медитациями и дыхательными упражнениями.</p>
              <button class="btn btn-accent" onclick="window.location.href='meditations.html'">
                Место Силы
              </button>
            </div>
          </div>
        </article>
      </section>
    </main>
  </div>
  
  <script>
    window.addEventListener('load', function() {
      if (window.Telegram && Telegram.WebApp) {
        Telegram.WebApp.ready();

        // Если хотите запретить «свайп вниз» в самом Telegram:
        if (Telegram.WebApp.setSwipeBehavior) {
          Telegram.WebApp.setSwipeBehavior({ allow_vertical_swipe: false });
        }

        // Запрашиваем фуллскрин (может сработать не на всех iOS)
        setTimeout(function(){
          Telegram.WebApp.requestFullscreen();
        }, 100);

        // Показываем кнопку Close, скрываем Back
        if (Telegram.WebApp.BackButton) {
          Telegram.WebApp.BackButton.hide();
        }
        if (Telegram.WebApp.CloseButton) {
          Telegram.WebApp.CloseButton.show();
        }

        // Устанавливаем фон всей области (вдруг поможет скрыть «белые» просветы)
        if (Telegram.WebApp.setBackgroundColor) {
          Telegram.WebApp.setBackgroundColor('#fcf8f8');
        }

        // Логи для отладки
        Telegram.WebApp.onEvent('fullscreenChanged', function(isFullscreen) {
          console.log('Fullscreen changed:', isFullscreen);
        });
        Telegram.WebApp.onEvent('fullscreenFailed', function(error) {
          console.error('Fullscreen failed:', error);
        });
      }
    });

    // Оставляем только "подсветку" центральной карточки
    document.addEventListener('DOMContentLoaded', () => {
      const container = document.querySelector('.scroll-container');
      const cards = document.querySelectorAll('.scroll-card');

      function onScroll() {
        const containerRect = container.getBoundingClientRect();
        const containerCenter = containerRect.left + containerRect.width / 2;

        cards.forEach(card => {
          const cardRect = card.getBoundingClientRect();
          const cardCenter = cardRect.left + cardRect.width / 2;
          const distance = Math.abs(containerCenter - cardCenter);

          if (distance < cardRect.width / 2) {
            card.classList.add('active');
          } else {
            card.classList.remove('active');
          }
        });
      }

      container.addEventListener('scroll', onScroll);
      onScroll();
    });
  </script>
</body>
</html>
