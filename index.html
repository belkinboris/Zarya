<!DOCTYPE html> 
<html lang="ru">
  <head>
    <!-- Мета-данные -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&family=Manrope:wght@400;500;700;800&family=Noto+Sans:wght@400;500;700;900"
    />

    <title>Galileo Design - Demo</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

    <!-- Dark Mode + Basic Gamification + Interactive Exercise Script -->
    <script>
      // 1) Dark Mode: Store preference in localStorage
      function loadDarkModePreference() {
        if (localStorage.getItem("theme") === "dark") {
          document.documentElement.classList.add("dark");
        }
      }
      function toggleDarkMode() {
        document.documentElement.classList.toggle("dark");
        if (document.documentElement.classList.contains("dark")) {
          localStorage.setItem("theme", "dark");
        } else {
          localStorage.setItem("theme", "light");
        }
      }

      // 2) Gamification: XP + daily streak (simple example)
      let xp = 0;
      let dailyStreak = 1;

      function loadGamificationState() {
        // read from localStorage
        xp = parseInt(localStorage.getItem("xp") || "0", 10);
        dailyStreak = parseInt(localStorage.getItem("dailyStreak") || "1", 10);
        updateGamificationUI();
      }
      function updateGamificationUI() {
        document.getElementById("xpValue").textContent = xp;
        document.getElementById("streakValue").textContent = dailyStreak;
      }
      function addXP(amount) {
        xp += amount;
        localStorage.setItem("xp", xp.toString());
        updateGamificationUI();
      }
      function incrementStreak() {
        dailyStreak += 1;
        localStorage.setItem("dailyStreak", dailyStreak.toString());
        updateGamificationUI();
      }

      // 3) Interactive Breathing Exercise
      // Simple “bubble” that expands over 4s, then contracts over 4s
      let breatheInterval = null;
      let bubble = null;
      let bubbleText = null;
      let isBreathing = false;

      function startBreathing() {
        if (isBreathing) return; // don't start if already in progress
        isBreathing = true;

        bubble.classList.remove("hidden");
        bubbleText.textContent = "Вдох...";

        let expand = true;
        breatheInterval = setInterval(() => {
          if (expand) {
            bubbleText.textContent = "Вдох...";
            bubble.classList.add("scale-125");
          } else {
            bubbleText.textContent = "Выдох...";
            bubble.classList.remove("scale-125");
          }
          expand = !expand;
        }, 4000);
      }

      function stopBreathing() {
        if (!isBreathing) return;
        isBreathing = false;
        clearInterval(breatheInterval);
        bubble.classList.add("hidden");
      }

      // on DOM load
      window.addEventListener("DOMContentLoaded", () => {
        loadDarkModePreference();
        loadGamificationState();
        bubble = document.getElementById("bubble");
        bubbleText = document.getElementById("bubbleText");
      });
    </script>

    <style>
      /* Simple transitions & scale effect for breathing bubble */
      #bubble {
        transition: transform 4s ease-in-out;
      }
    </style>
  </head>
  <body
    class="flex flex-col min-h-screen justify-between bg-[#fcf8f8] dark:bg-[#1b0d0d] transition-colors duration-300"
    style='font-family: Manrope, "Noto Sans", sans-serif;'
  >
    <!-- HEADER -->
    <header
      class="flex items-center p-4 pb-2 justify-between bg-[#fcf8f8] dark:bg-[#1b0d0d] transition-colors duration-300"
    >
      <!-- Logo or Avatar -->
      <a
        href="#"
        class="flex size-12 shrink-0 items-center"
        title="Logo / Profile"
      >
        <div
          class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-8"
          style='background-image: url("https://cdn.usegalileo.ai/sdxl10/e88c82de-2c73-4f5d-9508-71577a36eeed.png");'
        ></div>
      </a>

      <!-- Title -->
      <h2
        class="text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center pr-12 text-[#1b0d0d] dark:text-[#fcf8f8]"
      >
        Демонстрация
      </h2>

      <!-- Dark Mode Toggle -->
      <button
        class="flex items-center justify-center size-8 rounded-full bg-[#f3e7e7] text-[#1b0d0d] dark:bg-[#2d2d2d] dark:text-white hover:opacity-80"
        onclick="toggleDarkMode()"
        title="Тёмная тема"
      >
        <!-- Icon: sun/moon -->
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-5 w-5"
          viewBox="0 0 256 256"
          fill="currentColor"
        >
          <path
            d="M223.4,146.9a8,8,0,0,0-9.3-2.4A84,84,0,0,1,111.5,41.9a8,8,0,0,0-2.4-9.3,7.8,7.8,0,0,0-8.4-.8A100,100,0,1,0,224.2,155.3,7.8,7.8,0,0,0,223.4,146.9ZM128,212A84,84,0,0,1,97.2,49.6,100,100,0,1,0,206.4,158.8,84.5,84.5,0,0,1,128,212Z"
          ></path>
        </svg>
      </button>
    </header>

    <!-- MAIN CONTENT -->
    <main class="flex-1 p-4">
      <!-- GAMIFICATION Display -->
      <section class="mb-6">
        <h3
          class="text-xl font-bold mb-2 text-[#1b0d0d] dark:text-[#fcf8f8]"
        >
          Геймификация
        </h3>
        <div
          class="flex items-center gap-6 p-4 rounded-lg bg-white dark:bg-[#2d2d2d] shadow-sm"
        >
          <div>
            <p class="text-sm text-[#9a4c4c] dark:text-[#f3bebe]">
              Ваш XP:
            </p>
            <p
              id="xpValue"
              class="text-2xl font-bold text-[#1b0d0d] dark:text-white"
            >
              0
            </p>
          </div>
          <div>
            <p class="text-sm text-[#9a4c4c] dark:text-[#f3bebe]">
              Дней подряд:
            </p>
            <p
              id="streakValue"
              class="text-2xl font-bold text-[#1b0d0d] dark:text-white"
            >
              1
            </p>
          </div>
          <!-- Buttons to simulate XP or Streak gain -->
          <div class="flex gap-2 ml-auto">
            <button
              class="px-3 py-1 rounded-full bg-[#ec1313] text-white hover:bg-red-700"
              onclick="addXP(10)"
            >
              +10 XP
            </button>
            <button
              class="px-3 py-1 rounded-full bg-[#ec1313] text-white hover:bg-red-700"
              onclick="incrementStreak()"
            >
              +1 день
            </button>
          </div>
        </div>
      </section>

      <!-- INTERACTIVE EXERCISE: Breathing -->
      <section class="mb-6">
        <h3
          class="text-xl font-bold mb-2 text-[#1b0d0d] dark:text-[#fcf8f8]"
        >
          Дыхательное упражнение
        </h3>
        <div class="flex flex-col gap-2 bg-white dark:bg-[#2d2d2d] p-4 rounded-lg">
          <p class="text-sm text-[#9a4c4c] dark:text-[#f3bebe]">
            Нажмите «Начать» для запуска дыхательного цикла (4 секунды вдох, 4
            секунды выдох). Нажмите «Остановить», чтобы завершить.
          </p>
          <div class="flex gap-3">
            <button
              class="px-4 py-1 bg-[#ec1313] text-white rounded-full hover:bg-red-700"
              onclick="startBreathing()"
            >
              Начать
            </button>
            <button
              class="px-4 py-1 bg-[#f3e7e7] dark:bg-[#2d2d2d] text-[#1b0d0d] dark:text-white rounded-full hover:bg-[#e1d2d2] dark:hover:bg-[#3e3e3e]"
              onclick="stopBreathing()"
            >
              Остановить
            </button>
          </div>

          <!-- The expanding bubble -->
          <div
            id="bubble"
            class="hidden my-4 mx-auto w-32 h-32 rounded-full bg-[#ec1313] dark:bg-red-600 flex items-center justify-center"
          >
            <span
              id="bubbleText"
              class="text-white font-bold transition-all duration-300"
            >
              Вдох...
            </span>
          </div>
        </div>
      </section>

      <!-- GROUPS / TELEGRAM ANONYMOUS JOIN -->
      <section>
        <h3
          class="text-xl font-bold mb-2 text-[#1b0d0d] dark:text-[#fcf8f8]"
        >
          Группы поддержки (Анонимные чаты)
        </h3>
        <div
          class="flex flex-col bg-white dark:bg-[#2d2d2d] rounded-lg p-4 gap-3"
        >
          <!-- Example group item -->
          <div
            class="flex items-center justify-between p-2 rounded hover:bg-[#f3e7e7] dark:hover:bg-[#3e3e3e] cursor-pointer"
            onclick="joinTelegramGroup('cancer_support_bot')"
          >
            <div>
              <p
                class="text-[#1b0d0d] dark:text-white font-medium text-base"
              >
                Поддержка при онкологии
              </p>
              <p
                class="text-sm text-[#9a4c4c] dark:text-[#f3bebe]"
              >
                Анонимный чат в Telegram
              </p>
            </div>
            <button
              class="px-3 py-1 bg-[#ec1313] text-white rounded-full hover:bg-red-700"
            >
              Присоединиться
            </button>
          </div>

          <!-- Another group -->
          <div
            class="flex items-center justify-between p-2 rounded hover:bg-[#f3e7e7] dark:hover:bg-[#3e3e3e] cursor-pointer"
            onclick="joinTelegramGroup('anxiety_support_bot')"
          >
            <div>
              <p
                class="text-[#1b0d0d] dark:text-white font-medium text-base"
              >
                Тревога и депрессия
              </p>
              <p
                class="text-sm text-[#9a4c4c] dark:text-[#f3bebe]"
              >
                Анонимный чат в Telegram
              </p>
            </div>
            <button
              class="px-3 py-1 bg-[#ec1313] text-white rounded-full hover:bg-red-700"
            >
              Присоединиться
            </button>
          </div>
        </div>
      </section>
    </main>

    <!-- FOOTER NAV -->
    <footer>
      <div
        class="flex gap-2 border-t border-[#f3e7e7] dark:border-[#2d2d2d] bg-[#fcf8f8] dark:bg-[#1b0d0d] px-4 pb-3 pt-2 transition-colors duration-300"
      >
        <!-- Just placeholders -->
        <a
          class="flex flex-1 flex-col items-center justify-end gap-1 text-[#1b0d0d] dark:text-[#fcf8f8]"
          href="#"
        >
          <div data-icon="House" class="h-8 flex items-center justify-center">
            <!-- House icon -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 256 256"
              fill="currentColor"
            >
              <path
                d="M224,115.55V208a16,16,0,0,1-16,16H168a16,16,0,0,1-16-16V168a8,8,0,0,0-8-8H112a8,8,0,0,0-8,8v40a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V115.55a16,16,0,0,1,5.17-11.78l80-75.48a16,16,0,0,1,21.54,0l80,75.48A16,16,0,0,1,224,115.55Z"
              ></path>
            </svg>
          </div>
          <p class="text-xs font-medium leading-normal tracking-[0.015em]">
            Главная
          </p>
        </a>
        <a
          class="flex flex-1 flex-col items-center justify-end gap-1 text-[#9a4c4c] dark:text-[#b48c8c]"
          href="#"
        >
          <div class="h-8 flex items-center justify-center">
            <!-- Some icon -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 256 256"
              fill="currentColor"
            >
              <path
                d="M200,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V48A16,16,0,0,0,200,32Zm0,176H56V48H200Z"
              ></path>
            </svg>
          </div>
          <p class="text-xs font-medium leading-normal tracking-[0.015em]">
            Тесты
          </p>
        </a>
        <a
          class="flex flex-1 flex-col items-center justify-end gap-1 text-[#9a4c4c] dark:text-[#b48c8c]"
          href="#"
        >
          <div class="h-8 flex items-center justify-center">
            <!-- Another icon -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 256 256"
              fill="currentColor"
            >
              <path
                d="M224,40H32A16,16,0,0,0,16,56V208a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V56A16,16,0,0,0,224,40ZM168,96H88a8,8,0,0,1,0-16h80a8,8,0,0,1,0,16Z"
              ></path>
            </svg>
          </div>
          <p class="text-xs font-medium leading-normal tracking-[0.015em]">
            Группы
          </p>
        </a>
        <a
          class="flex flex-1 flex-col items-center justify-end gap-1 text-[#9a4c4c] dark:text-[#b48c8c]"
          href="#"
        >
          <div class="h-8 flex items-center justify-center">
            <!-- Another icon -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 256 256"
              fill="currentColor"
            >
              <path
                d="M230.92,212c-15.23-26.33-38.7-45.21-66.09-54.16a72,72,0,1,0-73.66,0C63.78,166.78,40.31,185.66,25.08,212a8,8,0,1,0,13.85,8c18.84-32.56,52.14-52,89.07-52s70.23,19.44,89.07,52a8,8,0,1,0,13.85-8Z"
              ></path>
            </svg>
          </div>
          <p class="text-xs font-medium leading-normal tracking-[0.015em]">
            Профиль
          </p>
        </a>
      </div>
      <div class="h-5 bg-[#fcf8f8] dark:bg-[#1b0d0d]"></div>
    </footer>

    <!-- SIMULATE TELEGRAM JOIN - BASIC JS -->
    <script>
      function joinTelegramGroup(botName) {
        // This is a placeholder for an "anonymous" join scenario.
        // In real usage, you might use telegram's "tg://resolve?domain=..." links,
        // or a Telegram Web App approach. For anonymity, you'd set up a
        // Telegram Bot that doesn't require phone number or a hidden username.

        const confirmJoin = confirm(
          "Хотите присоединиться к анонимному чату в Telegram? " +
            "\\nБудет открыт специальный miniapp/бот: @" +
            botName
        );
        if (confirmJoin) {
          // e.g. open the Telegram link in a new tab:
          // window.open(`tg://resolve?domain=${botName}`, "_blank");
          // or open a custom link for your web-based Telegram miniapp:
          window.open(`https://t.me/${botName}?start=anonymous`, "_blank");
        }
      }
    </script>
  </body>
</html>
